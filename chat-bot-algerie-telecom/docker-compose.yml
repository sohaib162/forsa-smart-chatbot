version: '3.8'

services:
  chatbot-api:
    image: my-chatbot-api:latest
    build: .
    container_name: chatbot_backend
    ports:
      - "8001:8000"



    
    # ----------------------------------------------------
    #  --- ADD THIS SECTION FOR LIVE CODE RELOADING ---
    # ----------------------------------------------------
    volumes:
      # Mounts the current directory ('.') into the container's working directory (/app)
      - .:/app 

    # ----------------------------------------------------
    #  --- IMPORTANT: Update CMD for Uvicorn Reload ---
    # ----------------------------------------------------
    # We must enable uvicorn's --reload flag so it detects changes.
    # Note: Uvicorn restart will be slow due to reloading the heavy models.
    command: ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000", "--reload"]